<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> 《JavaScript 教程》摘录 | Zhang Feng </title> <meta name="author" content="Zhang Feng"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://feng-zhang0712.github.io//blog/2024/events/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Zhang</span> Feng </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">《JavaScript 教程》摘录</h1> <p class="post-meta"> Created in October 17, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/category/blog"> <i class="fa-solid fa-tag fa-sm"></i> blog</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <blockquote> <p>本文是对<a href="https://wangdoc.com/javascript/events/" rel="external nofollow noopener" target="_blank">《JavaScript 教程 - 事件》</a>一章中部分知识点的摘录，请访问原文，获取更多详细信息。</p> </blockquote> <h2 id="一eventtarget-接口">一、EventTarget 接口</h2> <p>DOM 节点的事件操作（监听和触发），都定义在 <code class="language-plaintext highlighter-rouge">EventTarget</code> 接口。所有节点对象都部署了这个接口，其他一些需要事件通信的浏览器内置对象（比如，<code class="language-plaintext highlighter-rouge">XMLHttpRequest</code>、<code class="language-plaintext highlighter-rouge">AudioNode</code>、<code class="language-plaintext highlighter-rouge">AudioContext</code>）也部署了这个接口。</p> <p>该接口主要提供三个实例方法。</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">addEventListener(type, listener[, useCapture])</code>：用于在当前节点或对象上（即部署了 <code class="language-plaintext highlighter-rouge">EventTarget</code> 接口的对象），定义一个特定事件的监听函数。</p> <p>第三个参数除了布尔值 <code class="language-plaintext highlighter-rouge">useCapture</code>，还可以是一个监听器配置对象，定制事件监听行为。该对象有以下属性。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">capture</code>：布尔值，如果设为 <code class="language-plaintext highlighter-rouge">true</code>，表示监听函数在捕获阶段触发，默认为 <code class="language-plaintext highlighter-rouge">false</code>，在冒泡阶段触发。</li> <li> <code class="language-plaintext highlighter-rouge">once</code>：布尔值，如果设为 <code class="language-plaintext highlighter-rouge">true</code>，表示监听函数执行一次就会自动移除，后面将不再监听该事件。该属性默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">passive</code>：布尔值，设为 <code class="language-plaintext highlighter-rouge">true</code> 时，表示禁止监听函数调用 <code class="language-plaintext highlighter-rouge">preventDefault()</code>。如果调用了，浏览器将忽略这个要求，并在控制台输出一条警告。该属性默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">signal</code>：该属性的值为一个 <code class="language-plaintext highlighter-rouge">AbortSignal</code> 对象，为监听器设置了一个信号通道，用来在需要时发出信号，移除监听函数。</li> </ul> <p><code class="language-plaintext highlighter-rouge">addEventListener()</code> 可以为针对当前对象的同一个事件，添加多个不同的监听函数。这些函数按照添加顺序触发。如果为同一个事件多次添加同一个监听函数，该函数只会执行一次，多余的添加将自动被去除（不必使用 <code class="language-plaintext highlighter-rouge">removeEventListener()</code> 手动去除）。</p> </li> <li> <code class="language-plaintext highlighter-rouge">removeEventListener(type, listener[, useCapture])</code>：用于移除事件的监听函数，与 <code class="language-plaintext highlighter-rouge">addEventListener()</code> 完全一致。它的第一个参数“事件类型”，大小写敏感。</li> <li> <code class="language-plaintext highlighter-rouge">dispatchEvent(event)</code>：用于在当前节点上触发指定事件，从而触发监听函数的执行。</li> </ul> <h2 id="二事件模型">二、事件模型</h2> <p>JavaScript 有三种方法，可以为事件绑定监听函数。</p> <ul> <li>HTML 的 <code class="language-plaintext highlighter-rouge">on-</code> 属性。使用这个方法指定的监听代码，只会在<strong>冒泡阶段</strong>触发。</li> <li>元素节点的事件属性。使用这个方法指定的监听函数，也是只会在<strong>冒泡阶段</strong>触发。</li> <li> <p><code class="language-plaintext highlighter-rouge">EventTarget.addEventListener()</code>，推荐使用这种方法。它有如下优点：</p> <ul> <li>同一个事件可以添加多个监听函数。</li> <li>能够指定在哪个阶段（捕获阶段还是冒泡阶段）触发监听函数。</li> <li>除了 DOM 节点，其他对象（比如 <code class="language-plaintext highlighter-rouge">window</code>、<code class="language-plaintext highlighter-rouge">XMLHttpRequest</code> 等）也有这个接口，它等于是整个 JavaScript 统一的监听函数接口。</li> </ul> </li> </ul> <p>上面三种方式，函数内部的 <code class="language-plaintext highlighter-rouge">this</code> 指向触发事件的元素节点。</p> <p>一个事件发生后，会在子元素和父元素之间传播（propagation）。这种传播分成三个阶段。</p> <ul> <li>第一阶段：从 <code class="language-plaintext highlighter-rouge">window</code> 对象传导到目标节点（上层传到底层），称为“<strong>捕获阶段</strong>”（capture phase）。</li> <li>第二阶段：在目标节点上触发，称为“<strong>目标阶段</strong>”（target phase）。</li> <li>第三阶段：从目标节点传导回 <code class="language-plaintext highlighter-rouge">window</code> 对象（从底层传回上层），称为“<strong>冒泡阶段</strong>”（bubbling phase）。</li> </ul> <p>由于事件会在冒泡阶段向上传播到父节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件。这种方法叫做事件的<strong>代理</strong>（delegation）。</p> <h2 id="三event-对象">三、Event 对象</h2> <h3 id="31-概述">3.1 概述</h3> <p><code class="language-plaintext highlighter-rouge">Event</code> 构造函数可以用来生成实例对象。他接受两参数，第一个参数 <code class="language-plaintext highlighter-rouge">type</code> 是字符串，表示事件的名称；第二个参数 <code class="language-plaintext highlighter-rouge">options</code> 是一个对象，表示事件对象的配置。该对象主要有下面两个属性。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">bubbles</code>：布尔值，可选，默认为 <code class="language-plaintext highlighter-rouge">false</code>（即生成的事件只在“捕获阶段”触发监听函数），表示事件对象是否冒泡。</li> <li> <code class="language-plaintext highlighter-rouge">cancelable</code>：布尔值，可选，默认为 <code class="language-plaintext highlighter-rouge">false</code>，表示事件是否可以被取消，即能否用 <code class="language-plaintext highlighter-rouge">Event.preventDefault()</code> 取消这个事件。</li> </ul> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">ev</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Event</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">look</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="dl">'</span><span class="s1">bubbles</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">cancelable</span><span class="dl">'</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nf">dispatchEvent</span><span class="p">(</span><span class="nx">ev</span><span class="p">);</span>
</code></pre></div></div> <h3 id="32-实例属性">3.2 实例属性</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">Event.type</code> 属性返回一个字符串，表示事件类型。</li> <li> <code class="language-plaintext highlighter-rouge">Event.bubbles</code> 属性返回一个布尔值，表示当前事件是否会冒泡。该属性只读。</li> <li> <p><code class="language-plaintext highlighter-rouge">Event.eventPhase</code> 属性返回一个整数常量，表示事件目前所处的阶段。该属性只读。<code class="language-plaintext highlighter-rouge">Event.eventPhase</code> 的返回值有四种可能。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">0</code>，事件目前没有发生。</li> <li> <code class="language-plaintext highlighter-rouge">1</code>，事件目前处于捕获阶段，即处于从祖先节点向目标节点的传播过程中。</li> <li> <code class="language-plaintext highlighter-rouge">2</code>，事件到达目标节点，即 Event.target 属性指向的那个节点。</li> <li> <code class="language-plaintext highlighter-rouge">3</code>，事件处于冒泡阶段，即处于从目标节点向祖先节点的反向传播过程中。</li> </ul> </li> <li> <code class="language-plaintext highlighter-rouge">Event.cancelable</code> 属性返回一个布尔值，表示事件是否可以取消。</li> <li> <code class="language-plaintext highlighter-rouge">Event.cancelBubble</code> 属性是一个布尔值，如果设为 <code class="language-plaintext highlighter-rouge">true</code>，相当于执行 <code class="language-plaintext highlighter-rouge">Event.stopPropagation()</code>，可以阻止事件的传播。</li> <li> <code class="language-plaintext highlighter-rouge">Event.defaultPrevented</code> 属性返回一个布尔值，表示该事件是否调用过 <code class="language-plaintext highlighter-rouge">Event.preventDefault()</code> 方法。该属性只读。</li> <li> <code class="language-plaintext highlighter-rouge">Event.target</code> 属性返回原始触发事件的那个节点，即事件最初发生的节点。这个属性不会随着事件的传播而改变。</li> <li> <p><code class="language-plaintext highlighter-rouge">Event.currentTarget</code> 属性返回事件当前所在的节点，即事件当前正在通过的节点，也就是当前正在执行的监听函数所在的那个节点。随着事件的传播，这个属性的值会变。</p> <div class="language-javascript highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="c1">// HTML 代码为</span>
<span class="c1">// &lt;p id="para"&gt;Hello &lt;em&gt;World&lt;/em&gt;&lt;/p&gt;</span>
<span class="kd">function</span> <span class="nf">hide</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// 不管点击 Hello 或 World，总是返回 true</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">);</span>
  <span class="c1">// 点击 Hello，返回 true</span>
  <span class="c1">// 点击 World，返回 false</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">this</span> <span class="o">===</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
<span class="p">}</span>
<span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">para</span><span class="dl">'</span><span class="p">).</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="nx">hide</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div> </div> <p>上面代码中，<code class="language-plaintext highlighter-rouge">&lt;em&gt;</code> 是 <code class="language-plaintext highlighter-rouge">&lt;p&gt;</code> 的子节点，点击 <code class="language-plaintext highlighter-rouge">&lt;em&gt;</code> 或者点击 <code class="language-plaintext highlighter-rouge">&lt;p&gt;</code>，都会导致监听函数执行。这时，<code class="language-plaintext highlighter-rouge">e.target</code> 总是指向原始点击位置的那个节点，而 <code class="language-plaintext highlighter-rouge">e.currentTarget</code> 指向事件传播过程中正在经过的那个节点。由于监听函数只有事件经过时才会触发，所以 <code class="language-plaintext highlighter-rouge">e.currentTarget</code> 总是等同于监听函数内部的 <code class="language-plaintext highlighter-rouge">this</code>。</p> </li> <li> <code class="language-plaintext highlighter-rouge">Event.timeStamp</code> 属性返回一个毫秒时间戳，表示事件发生的时间。它是相对于网页加载成功开始计算的。</li> <li> <code class="language-plaintext highlighter-rouge">Event.isTrusted</code> 属性返回一个布尔值，表示该事件是否由真实的用户行为产生。</li> <li> <code class="language-plaintext highlighter-rouge">Event.detail</code> 属性只有浏览器的 UI （用户界面）事件才具有。该属性返回一个数值，表示事件的某种信息。具体含义与事件类型相关。比如，对于 <code class="language-plaintext highlighter-rouge">click</code> 和 <code class="language-plaintext highlighter-rouge">dblclick</code> 事件，<code class="language-plaintext highlighter-rouge">Event.detail</code> 是鼠标按下的次数（<code class="language-plaintext highlighter-rouge">1</code> 表示单击，<code class="language-plaintext highlighter-rouge">2</code> 表示双击，<code class="language-plaintext highlighter-rouge">3</code> 表示三击）；对于鼠标滚轮事件，<code class="language-plaintext highlighter-rouge">Event.detail</code> 是滚轮正向滚动的距离，负值就是负向滚动的距离，返回值总是 <code class="language-plaintext highlighter-rouge">3</code> 的倍数。</li> </ul> <h3 id="33-实例方法">3.3 实例方法</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">Event.preventDefault()</code> 用于取消浏览器对当前事件的默认行为。该方法生效的前提是，事件对象的 <code class="language-plaintext highlighter-rouge">cancelable</code> 属性为 <code class="language-plaintext highlighter-rouge">true</code>，如果为 <code class="language-plaintext highlighter-rouge">false</code>，调用该方法没有任何效果。注意，该方法只是取消事件对当前元素的默认影响，不会阻止事件的传播。如果要阻止传播，可以使用 <code class="language-plaintext highlighter-rouge">stopPropagation()</code> 或 <code class="language-plaintext highlighter-rouge">stopImmediatePropagation()</code>。</li> <li> <code class="language-plaintext highlighter-rouge">Event.stopPropagation()</code> 用于阻止事件在 DOM 中继续传播，防止再触发定义在别的节点上的监听函数，但是不包括在当前节点上其他的事件监听函数。</li> <li> <code class="language-plaintext highlighter-rouge">Event.stopImmediatePropagation()</code> 阻止同一个事件的其他监听函数被调用，不管监听函数定义在当前节点还是其他节点。也就是说，该方法阻止事件的传播，比 <code class="language-plaintext highlighter-rouge">Event.stopPropagation()</code> 更彻底。如果同一个节点对于同一个事件指定了多个监听函数，这些函数会根据添加的顺序依次调用。只要其中有一个监听函数调用了 <code class="language-plaintext highlighter-rouge">Event.stopImmediatePropagation()</code>，其他的监听函数就不会再执行了。</li> <li> <code class="language-plaintext highlighter-rouge">Event.composedPath()</code> 返回一个数组，成员是事件的最底层节点和依次冒泡经过的所有上层节点。</li> </ul> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// HTML 代码如下</span>
<span class="c1">// &lt;div&gt;</span>
<span class="c1">//   &lt;p&gt;Hello&lt;/p&gt;</span>
<span class="c1">// &lt;/div&gt;</span>
<span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">p</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">div</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nf">composedPath</span><span class="p">());</span>
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
<span class="c1">// [p, div, body, html, document, Window]</span>
</code></pre></div></div> <p>上面代码中，<code class="language-plaintext highlighter-rouge">click</code> 事件的最底层节点是 <code class="language-plaintext highlighter-rouge">p</code>，向上依次是 <code class="language-plaintext highlighter-rouge">div</code>、<code class="language-plaintext highlighter-rouge">body</code>、<code class="language-plaintext highlighter-rouge">html</code>、<code class="language-plaintext highlighter-rouge">document</code>、<code class="language-plaintext highlighter-rouge">Window</code>。</p> <h2 id="四鼠标事件">四、鼠标事件</h2> <h3 id="41-鼠标事件的种类">4.1 鼠标事件的种类</h3> <p>鼠标事件主要有下面这些，所有事件都继承了 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 接口。</p> <h4 id="1点击事件">（1）点击事件</h4> <p>鼠标点击相关的有四个事件。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">mousedown</code>：按下鼠标键时触发。</li> <li> <code class="language-plaintext highlighter-rouge">mouseup</code>：释放按下的鼠标键时触发。</li> <li> <code class="language-plaintext highlighter-rouge">click</code>：按下鼠标（通常是按下主按钮）时触发。</li> <li> <code class="language-plaintext highlighter-rouge">dblclick</code>：在同一个元素上双击鼠标时触发。</li> </ul> <p><code class="language-plaintext highlighter-rouge">click</code> 事件的触发顺序是：<code class="language-plaintext highlighter-rouge">mousedown</code> -&gt; <code class="language-plaintext highlighter-rouge">mouseup</code> -&gt; <code class="language-plaintext highlighter-rouge">click</code>。 <code class="language-plaintext highlighter-rouge">dblclick</code> 事件的触发顺序是：<code class="language-plaintext highlighter-rouge">mousedown</code> -&gt; <code class="language-plaintext highlighter-rouge">mouseup</code> -&gt; <code class="language-plaintext highlighter-rouge">click</code> -&gt; <code class="language-plaintext highlighter-rouge">dblclick</code>。</p> <h4 id="2移动事件">（2）移动事件</h4> <p>鼠标移动相关的有五个事件。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">mousemove</code>：当鼠标在一个<strong>节点内部移动</strong>时触发。当鼠标持续移动时，该事件会连续触发。为了避免性能问题，建议对该事件的监听函数做一些限定，比如限定一段时间内只能运行一次。</li> <li> <code class="language-plaintext highlighter-rouge">mouseenter</code>：鼠标<strong>进入</strong>一个节点时触发，进入子节点<strong>不会</strong>触发这个事件。</li> <li> <code class="language-plaintext highlighter-rouge">mouseleave</code>：鼠标<strong>离开</strong>一个节点时触发，离开父节点<strong>不会</strong>触发这个事件。</li> <li> <code class="language-plaintext highlighter-rouge">mouseover</code>：鼠标<strong>进入</strong>一个节点时触发，进入子节点会<strong>再次</strong>触发这个事件。</li> <li> <code class="language-plaintext highlighter-rouge">mouseout</code>：鼠标<strong>离开</strong>一个节点时触发，离开父节点也会<strong>再次</strong>触发这个事件。</li> </ul> <h4 id="3其他事件">（3）其他事件</h4> <ul> <li> <code class="language-plaintext highlighter-rouge">contextmenu</code>：按下鼠标右键时（上下文菜单出现前）触发，或者按下“上下文”菜单键时触发。</li> <li> <code class="language-plaintext highlighter-rouge">wheel</code>：滚动鼠标的滚轮时触发，该事件继承的是 <code class="language-plaintext highlighter-rouge">WheelEvent</code> 接口。</li> </ul> <h3 id="42-mouseevent-接口">4.2 MouseEvent 接口</h3> <p><code class="language-plaintext highlighter-rouge">MouseEvent</code> 接口继承了 <code class="language-plaintext highlighter-rouge">Event</code> 接口，所以拥有 <code class="language-plaintext highlighter-rouge">Event</code> 的所有属性和方法，并且还提供鼠标独有的属性和方法。浏览器原生提供 <code class="language-plaintext highlighter-rouge">MouseEvent()</code> 构造函数，用于新建 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 实例。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MouseEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">MouseEvent()</code> 构造函数接受两个参数。第一个参数是字符串，表示事件名称；第二个参数是一个事件配置对象，该参数可选。除了 <code class="language-plaintext highlighter-rouge">Event</code> 接口的实例配置属性，该对象可以配置以下属性，所有属性都是可选的。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">screenX</code>：数值，鼠标相对于屏幕的水平位置（单位像素），默认值为 <code class="language-plaintext highlighter-rouge">0</code>，设置该属性不会移动鼠标。</li> <li> <code class="language-plaintext highlighter-rouge">screenY</code>：数值，鼠标相对于屏幕的垂直位置（单位像素），其他与 <code class="language-plaintext highlighter-rouge">screenX</code> 相同。</li> <li> <code class="language-plaintext highlighter-rouge">clientX</code>：数值，鼠标相对于程序窗口的水平位置（单位像素），默认值为 <code class="language-plaintext highlighter-rouge">0</code>，设置该属性不会移动鼠标。</li> <li> <code class="language-plaintext highlighter-rouge">clientY</code>：数值，鼠标相对于程序窗口的垂直位置（单位像素），其他与 <code class="language-plaintext highlighter-rouge">clientX</code> 相同。</li> <li> <code class="language-plaintext highlighter-rouge">shiftKey</code>：布尔值，是否同时按下了 <code class="language-plaintext highlighter-rouge">Shift</code> 键，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">ctrlKey</code>：布尔值，是否同时按下了 <code class="language-plaintext highlighter-rouge">Ctrl</code> 键，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">altKey</code>：布尔值，是否同时按下 <code class="language-plaintext highlighter-rouge">Alt</code> 键，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">metaKey</code>：布尔值，是否同时按下 <code class="language-plaintext highlighter-rouge">Meta</code> 键，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">button</code>：数值，表示按下了哪个鼠标按键，默认值为 <code class="language-plaintext highlighter-rouge">0</code>，表示按下主键（通常是鼠标的左键）或者当前事件没有定义这个属性；<code class="language-plaintext highlighter-rouge">1</code> 表示按下辅助键（通常是鼠标的中间键），<code class="language-plaintext highlighter-rouge">2</code> 表示按下次要键（通常是鼠标的右键）。</li> <li> <code class="language-plaintext highlighter-rouge">buttons</code>：数值，表示按下了鼠标的哪些键，是一个三个比特位的二进制值，默认为 <code class="language-plaintext highlighter-rouge">0</code>（没有按下任何键）。<code class="language-plaintext highlighter-rouge">1</code>（二进制 <code class="language-plaintext highlighter-rouge">001</code>）表示按下主键（通常是左键），<code class="language-plaintext highlighter-rouge">2</code>（二进制 <code class="language-plaintext highlighter-rouge">010</code>）表示按下次要键（通常是右键），<code class="language-plaintext highlighter-rouge">4</code>（二进制 <code class="language-plaintext highlighter-rouge">100</code>）表示按下辅助键（通常是中间键）。因此，如果返回 <code class="language-plaintext highlighter-rouge">3</code>（二进制 <code class="language-plaintext highlighter-rouge">011</code>）就表示同时按下了左键和右键。</li> <li> <code class="language-plaintext highlighter-rouge">relatedTarget</code>：节点对象，表示事件的相关节点，默认为 <code class="language-plaintext highlighter-rouge">null</code>。<code class="language-plaintext highlighter-rouge">mouseenter</code> 和 <code class="language-plaintext highlighter-rouge">mouseover</code> 事件时，表示鼠标刚刚离开的那个元素节点；<code class="language-plaintext highlighter-rouge">mouseleave</code> 和 <code class="language-plaintext highlighter-rouge">mouseout</code> 事件时，表示鼠标正在进入的那个元素节点。</li> </ul> <h3 id="43-mouseevent-接口的实例属性">4.3 MouseEvent 接口的实例属性</h3> <h4 id="1mouseeventshiftkeymouseeventctrlkeymouseeventaltkeymouseeventmetakey">（1）MouseEvent.shiftKey，MouseEvent.ctrlKey，MouseEvent.altKey，MouseEvent.metaKey</h4> <p><code class="language-plaintext highlighter-rouge">MouseEvent.shiftKey</code>、<code class="language-plaintext highlighter-rouge">MouseEvent.ctrlKey</code>、<code class="language-plaintext highlighter-rouge">MouseEvent.altKey</code>、<code class="language-plaintext highlighter-rouge">MouseEvent.metaKey</code> 这四个属性都返回一个布尔值，表示事件发生时，是否按下对应的键。它们都是只读属性。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">shiftKey</code> 属性：<code class="language-plaintext highlighter-rouge">Shift</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">ctrlKey</code> 属性：<code class="language-plaintext highlighter-rouge">Ctrl</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">altKey</code> 属性：<code class="language-plaintext highlighter-rouge">Alt</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">metaKey</code> 属性：<code class="language-plaintext highlighter-rouge">Meta</code> 键（Mac 键盘是一个四瓣的小花，Windows 键盘是 <code class="language-plaintext highlighter-rouge">Windows</code> 键）</li> </ul> <h4 id="2mouseeventbuttonmouseeventbuttons">（2）MouseEvent.button，MouseEvent.buttons</h4> <ul> <li> <p><code class="language-plaintext highlighter-rouge">MouseEvent.button</code> 属性返回一个数值，表示事件发生时按下了鼠标的哪个键。该属性只读。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">0</code>：按下主键（通常是左键），或者该事件没有初始化这个属性（比如 <code class="language-plaintext highlighter-rouge">mousemove</code> 事件）。</li> <li> <code class="language-plaintext highlighter-rouge">1</code>：按下辅助键（通常是中键或者滚轮键）。</li> <li> <code class="language-plaintext highlighter-rouge">2</code>：按下次键（通常是右键）。</li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">MouseEvent.buttons</code> 属性返回一个三个比特位的值，表示同时按下了哪些键。它用来处理同时按下多个鼠标键的情况。该属性只读。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">1</code>：二进制为 <code class="language-plaintext highlighter-rouge">001</code>（十进制的 <code class="language-plaintext highlighter-rouge">1</code>），表示按下左键。</li> <li> <code class="language-plaintext highlighter-rouge">2</code>：二进制为 <code class="language-plaintext highlighter-rouge">010</code>（十进制的 <code class="language-plaintext highlighter-rouge">2</code>），表示按下右键。</li> <li> <code class="language-plaintext highlighter-rouge">4</code>：二进制为 <code class="language-plaintext highlighter-rouge">100</code>（十进制的 <code class="language-plaintext highlighter-rouge">4</code>），表示按下中键或滚轮键。</li> </ul> </li> </ul> <p>同时按下多个键的时候，每个按下的键对应的比特位都会有值。比如，同时按下左键和右键，会返回 <code class="language-plaintext highlighter-rouge">3</code>（二进制为 <code class="language-plaintext highlighter-rouge">011</code>）。</p> <h4 id="3mouseeventscreenxmouseeventscreeny">（3）MouseEvent.screenX，MouseEvent.screenY</h4> <ul> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.screenX</code> 属性返回鼠标位置相对于<strong>屏幕左上角</strong>的水平坐标（单位像素）。</li> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.screenY</code> 属性返回垂直坐标。</li> </ul> <p>这两个都是只读属性。</p> <h4 id="4mouseeventclientxmouseeventclienty">（4）MouseEvent.clientX，MouseEvent.clientY</h4> <ul> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.clientX</code> 属性返回鼠标位置相对于<strong>浏览器窗口左上角</strong>的水平坐标（单位像素）。</li> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.clientY</code> 属性返回垂直坐标。</li> </ul> <p>这两个都是只读属性。</p> <h4 id="5mouseeventpagexmouseeventpagey">（5）MouseEvent.pageX，MouseEvent.pageY</h4> <ul> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.pageX</code> 属性返回鼠标位置与文档左侧边缘的距离（单位像素）。</li> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.pageY</code> 属性返回与文档上侧边缘的距离（单位像素）。它们的返回值都包括文档不可见的部分。</li> </ul> <p>这两个都是只读属性。</p> <h4 id="6mouseeventoffsetxmouseeventoffsety">（6）MouseEvent.offsetX，MouseEvent.offsetY</h4> <ul> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.offsetX</code> 属性返回鼠标位置与目标节点左侧的 <code class="language-plaintext highlighter-rouge">padding</code> 边缘的水平距离（单位像素）。</li> <li> <code class="language-plaintext highlighter-rouge">MouseEvent.offsetY</code> 属性返回与目标节点上方的 <code class="language-plaintext highlighter-rouge">padding</code> 边缘的垂直距离。</li> </ul> <p>这两个都是只读属性。</p> <h4 id="7mouseeventmovementxmouseeventmovementy">（7）MouseEvent.movementX，MouseEvent.movementY</h4> <ul> <li> <p><code class="language-plaintext highlighter-rouge">MouseEvent.movementX</code> 属性返回当前位置与上一个 <code class="language-plaintext highlighter-rouge">mousemove</code> 事件之间的水平距离（单位像素）。数值上，它等于下面的计算公式。</p> <div class="language-javascript highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nx">currentEvent</span><span class="p">.</span><span class="nx">movementX</span> <span class="o">=</span> <span class="nx">currentEvent</span><span class="p">.</span><span class="nx">screenX</span> <span class="o">-</span> <span class="nx">previousEvent</span><span class="p">.</span><span class="nx">screenX</span>
</code></pre></div> </div> </li> <li> <p><code class="language-plaintext highlighter-rouge">MouseEvent.movementY</code> 属性返回当前位置与上一个 <code class="language-plaintext highlighter-rouge">mousemove</code> 事件之间的垂直距离（单位像素）。数值上，它等于下面的计算公式。</p> <div class="language-javascript highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nx">currentEvent</span><span class="p">.</span><span class="nx">movementY</span> <span class="o">=</span> <span class="nx">currentEvent</span><span class="p">.</span><span class="nx">screenY</span> <span class="o">-</span> <span class="nx">previousEvent</span><span class="p">.</span><span class="nx">screenY</span><span class="err">。</span>
</code></pre></div> </div> </li> </ul> <h4 id="8mouseeventrelatedtarget">（8）MouseEvent.relatedTarget</h4> <p><code class="language-plaintext highlighter-rouge">MouseEvent.relatedTarget</code> 属性返回事件的相关节点。对于那些没有相关节点的事件，该属性返回 <code class="language-plaintext highlighter-rouge">null</code>。该属性只读。</p> <h3 id="44-mouseevent-接口的实例方法">4.4 MouseEvent 接口的实例方法</h3> <p><code class="language-plaintext highlighter-rouge">MouseEvent.getModifierState(key)</code> 返回一个布尔值，表示有没有按下特定的功能键。它的参数是一个表示功能键的字符串。</p> <h3 id="45-wheelevent-接口">4.5 WheelEvent 接口</h3> <h4 id="1概述">（1）概述</h4> <p><code class="language-plaintext highlighter-rouge">WheelEvent</code> 接口继承了 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 实例，代表鼠标滚轮事件的实例对象。目前，鼠标滚轮相关的事件只有 <code class="language-plaintext highlighter-rouge">wheel</code> 事件，用户滚动鼠标的滚轮，就生成这个事件的实例。</p> <p>浏览器原生提供 <code class="language-plaintext highlighter-rouge">WheelEvent()</code> 构造函数，用来生成 <code class="language-plaintext highlighter-rouge">WheelEvent</code> 实例。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">wheelEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WheelEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">WheelEvent()</code> 构造函数可以接受两个参数，第一个是字符串，表示事件类型，对于滚轮事件来说，这个值目前只能是 <code class="language-plaintext highlighter-rouge">wheel</code>。第二个参数是事件的配置对象。该对象的属性除了 <code class="language-plaintext highlighter-rouge">Event</code>、<code class="language-plaintext highlighter-rouge">UIEvent</code> 的配置属性以外，还可以接受以下几个属性，所有属性都是可选的。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">deltaX</code>：数值，表示滚轮的水平滚动量，默认值是 <code class="language-plaintext highlighter-rouge">0.0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">deltaY</code>：数值，表示滚轮的垂直滚动量，默认值是 <code class="language-plaintext highlighter-rouge">0.0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">deltaZ</code>：数值，表示滚轮的 <code class="language-plaintext highlighter-rouge">Z</code> 轴滚动量，默认值是 <code class="language-plaintext highlighter-rouge">0.0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">deltaMode</code>：数值，表示相关的滚动事件的单位，适用于上面三个属性。<code class="language-plaintext highlighter-rouge">0</code> 表示滚动单位为像素，<code class="language-plaintext highlighter-rouge">1</code> 表示单位为行，<code class="language-plaintext highlighter-rouge">2</code> 表示单位为页，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> </ul> <h4 id="2实例属性">（2）实例属性</h4> <p><code class="language-plaintext highlighter-rouge">WheelEvent</code> 事件实例除了具有 <code class="language-plaintext highlighter-rouge">Event</code> 和 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 的实例属性和实例方法，还有一些自己的实例属性，但是没有自己的实例方法。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">WheelEvent.deltaX</code>：数值，表示滚轮的水平滚动量。</li> <li> <code class="language-plaintext highlighter-rouge">WheelEvent.deltaY</code>：数值，表示滚轮的垂直滚动量。</li> <li> <code class="language-plaintext highlighter-rouge">WheelEvent.deltaZ</code>：数值，表示滚轮的 <code class="language-plaintext highlighter-rouge">Z</code> 轴滚动量。</li> <li> <code class="language-plaintext highlighter-rouge">WheelEvent.deltaMode</code>：数值，表示上面三个属性的单位，<code class="language-plaintext highlighter-rouge">0</code> 是像素，<code class="language-plaintext highlighter-rouge">1</code> 是行，<code class="language-plaintext highlighter-rouge">2</code> 是页。</li> </ul> <p>上面的属性都是只读属性。</p> <h2 id="五键盘事件">五、键盘事件</h2> <h3 id="51-键盘事件的种类">5.1 键盘事件的种类</h3> <p>键盘事件由用户击打键盘触发，主要有 <code class="language-plaintext highlighter-rouge">keydown</code>、<code class="language-plaintext highlighter-rouge">keypress</code>、<code class="language-plaintext highlighter-rouge">keyup</code> 三个事件，它们都继承了 <code class="language-plaintext highlighter-rouge">KeyboardEvent</code> 接口。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">keydown</code>：按下键盘时触发。</li> <li> <code class="language-plaintext highlighter-rouge">keypress</code>：按下有值的键时触发，即按下 <code class="language-plaintext highlighter-rouge">Shift</code>、<code class="language-plaintext highlighter-rouge">Ctrl</code>、<code class="language-plaintext highlighter-rouge">Alt</code>、<code class="language-plaintext highlighter-rouge">Meta</code> 这样无值的键，这个事件不会触发。对于有值的键，按下时先触发 <code class="language-plaintext highlighter-rouge">keydown</code> 事件，再触发这个事件。</li> <li> <code class="language-plaintext highlighter-rouge">keyup</code>：松开键盘时触发该事件。</li> </ul> <p>如果用户一直按键不松开，就会连续触发键盘事件，触发的顺序如下。</p> <ol> <li><code class="language-plaintext highlighter-rouge">keydown</code></li> <li><code class="language-plaintext highlighter-rouge">keypress</code></li> <li><code class="language-plaintext highlighter-rouge">keydown</code></li> <li><code class="language-plaintext highlighter-rouge">keypress</code></li> <li>…（重复以上过程）</li> <li><code class="language-plaintext highlighter-rouge">keyup</code></li> </ol> <h3 id="52-keyboardevent-接口概述">5.2 KeyboardEvent 接口概述</h3> <p><code class="language-plaintext highlighter-rouge">KeyboardEvent</code> 接口用来描述用户与键盘的互动。这个接口继承了 <code class="language-plaintext highlighter-rouge">Event</code> 接口，并且定义了自己的实例属性和实例方法。</p> <p>浏览器原生提供 <code class="language-plaintext highlighter-rouge">KeyboardEvent</code> 构造函数，用来新建键盘事件的实例。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">KeyboardEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">KeyboardEvent</code> 构造函数接受两个参数。第一个参数是字符串，表示事件类型；第二个参数是一个事件配置对象，该参数可选。除了 <code class="language-plaintext highlighter-rouge">Event</code> 接口提供的属性，还可以配置以下字段，它们都是可选。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">key</code>：字符串，当前按下的键，默认为空字符串。</li> <li> <code class="language-plaintext highlighter-rouge">code</code>：字符串，表示当前按下的键的字符串形式，默认为空字符串。</li> <li> <code class="language-plaintext highlighter-rouge">repeat</code>：布尔值，是否重复按键，默认为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">location</code>：整数，当前按下的键的位置，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">ctrlKey</code>：布尔值，是否按下 <code class="language-plaintext highlighter-rouge">Ctrl</code> 键，默认为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">shiftKey</code>：布尔值，是否按下 <code class="language-plaintext highlighter-rouge">Shift</code> 键，默认为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">altKey</code>：布尔值，是否按下 <code class="language-plaintext highlighter-rouge">Alt</code> 键，默认为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">metaKey</code>：布尔值，是否按下 <code class="language-plaintext highlighter-rouge">Meta</code> 键，默认为 <code class="language-plaintext highlighter-rouge">false</code>。</li> </ul> <h3 id="53-keyboardevent-的实例属性">5.3 KeyboardEvent 的实例属性</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">KeyboardEvent.key</code> 属性返回一个字符串，表示按下的键名。该属性只读。</li> <li> <code class="language-plaintext highlighter-rouge">KeyboardEvent.code</code> 属性返回一个字符串，表示当前按下的键的字符串形式。该属性只读。</li> <li> <code class="language-plaintext highlighter-rouge">KeyboardEvent.repeat</code> 返回一个布尔值，代表该键是否被按着不放，以便判断是否重复这个键，即浏览器会持续触发 <code class="language-plaintext highlighter-rouge">keydown</code> 和 <code class="language-plaintext highlighter-rouge">keypress</code> 事件，直到用户松开手为止。</li> <li> <code class="language-plaintext highlighter-rouge">KeyboardEvent.location</code> 属性返回一个整数，表示按下的键处在键盘的哪个区域。它可能取以下值。</li> <li> <code class="language-plaintext highlighter-rouge">KeyboardEvent.shiftKey</code> 表示是否按下 <code class="language-plaintext highlighter-rouge">Shift</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">KeyboardEvent.ctrlKey</code> 表示是否按下 <code class="language-plaintext highlighter-rouge">Ctrl</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">KeyboardEvent.altKey</code> 表示是否按下 <code class="language-plaintext highlighter-rouge">Alt</code> 键</li> <li> <p><code class="language-plaintext highlighter-rouge">KeyboardEvent.metaKey</code> 表示是否按下 <code class="language-plaintext highlighter-rouge">meta</code> 键（Mac 系统是一个四瓣的小花，Windows 系统是 <code class="language-plaintext highlighter-rouge">windows</code> 键）</p> <ul> <li> <code class="language-plaintext highlighter-rouge">0</code>：处在键盘的主区域，或者无法判断处于哪个区域。</li> <li> <code class="language-plaintext highlighter-rouge">1</code>：处在键盘的左侧，只适用那些有两个位置的键（比如 <code class="language-plaintext highlighter-rouge">Ctrl</code> 和 <code class="language-plaintext highlighter-rouge">Shift</code> 键）。</li> <li> <code class="language-plaintext highlighter-rouge">2</code>：处在键盘的右侧，只适用那些有两个位置的键（比如 <code class="language-plaintext highlighter-rouge">Ctrl</code> 和 <code class="language-plaintext highlighter-rouge">Shift</code> 键）。</li> <li> <code class="language-plaintext highlighter-rouge">3</code>：处在数字小键盘。</li> </ul> </li> </ul> <h3 id="53-keyboardevent-的实例方法">5.3 KeyboardEvent 的实例方法</h3> <p><code class="language-plaintext highlighter-rouge">KeyboardEvent.getModifierState(key)</code> 返回一个布尔值，表示是否按下或激活指定的功能键。它的常用参数如下。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">Shift</code>：<code class="language-plaintext highlighter-rouge">Shift</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">Control</code>：<code class="language-plaintext highlighter-rouge">Ctrl</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">Alt</code>：<code class="language-plaintext highlighter-rouge">Alt</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">Meta</code>：<code class="language-plaintext highlighter-rouge">Meta</code> 键</li> <li> <code class="language-plaintext highlighter-rouge">CapsLock</code>：大写锁定键</li> <li> <code class="language-plaintext highlighter-rouge">NumLock</code>：数字键盘开关键</li> </ul> <h2 id="六进度事件">六、进度事件</h2> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <h2 id="七表单事件">七、表单事件</h2> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <h2 id="八触摸事件">八、触摸事件</h2> <h3 id="1-触摸操作概述">1. 触摸操作概述</h3> <p>浏览器的触摸 API 由三个部分组成。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">Touch</code>：一个触摸点。<code class="language-plaintext highlighter-rouge">Touch</code> 接口的实例对象表示触摸点，包括位置、大小、形状、压力、目标元素等属性。</li> <li> <code class="language-plaintext highlighter-rouge">TouchList</code>：多个触摸点的集合。有时，触摸动作由多个触摸点组成，多个触摸点的集合由 <code class="language-plaintext highlighter-rouge">TouchList</code> 接口的实例对象表示。</li> <li> <code class="language-plaintext highlighter-rouge">TouchEvent</code>：触摸引发的事件实例。<code class="language-plaintext highlighter-rouge">TouchEvent</code> 接口的实例对象代表由触摸引发的事件，只有触摸屏才会引发这一类事件。</li> </ul> <p>很多时候，触摸事件和鼠标事件同时触发，即使这个时候并没有用到鼠标。这是为了让那些只定义鼠标事件、没有定义触摸事件的代码，在触摸屏的情况下仍然能用。如果想避免这种情况，可以用 <code class="language-plaintext highlighter-rouge">event.preventDefault()</code> 阻止发出鼠标事件。</p> <h3 id="2-touch-接口">2. Touch 接口</h3> <h4 id="21-touch-接口概述">2.1 Touch 接口概述</h4> <p>Touch 接口代表单个触摸点。触摸点可能是一根手指，也可能是一根触摸笔。Touch 构造函数用来生成 Touch 实例。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">touch</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Touch</span><span class="p">(</span><span class="nx">touchOptions</span><span class="p">);</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">touchOptions</code> 配置对象有以下属性。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">identifier</code>：必需，类型为整数，表示触摸点的唯一 ID。</li> <li> <code class="language-plaintext highlighter-rouge">target</code>：必需，类型为元素节点，表示触摸点开始时所在的网页元素。</li> <li> <code class="language-plaintext highlighter-rouge">screenX</code>：可选，类型为数值，表示触摸点相对于屏幕左上角的水平距离，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">screenY</code>：可选，类型为数值，表示触摸点相对于屏幕左上角的垂直距离，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">clientX</code>：可选，类型为数值，表示触摸点相对于浏览器窗口左上角的水平距离，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">clientY</code>：可选，类型为数值，表示触摸点相对于浏览器窗口左上角的垂直距离，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">pageX</code>：可选，类型为数值，表示触摸点相对于网页左上角的水平位置（即包括页面的滚动距离），默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">pageY</code>：可选，类型为数值，表示触摸点相对于网页左上角的垂直位置（即包括页面的滚动距离），默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">radiusX</code>：可选，类型为数值，表示触摸点周围受到影响的椭圆范围的 <code class="language-plaintext highlighter-rouge">X</code> 轴半径，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">radiusY</code>：可选：类型为数值，表示触摸点周围受到影响的椭圆范围的 <code class="language-plaintext highlighter-rouge">Y</code> 轴半径，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">rotationAngle</code>：可选，类型为数值，表示触摸区域的椭圆的旋转角度，单位为度数，在 <code class="language-plaintext highlighter-rouge">0</code> 到 <code class="language-plaintext highlighter-rouge">90</code> 度之间，默认值为 <code class="language-plaintext highlighter-rouge">0</code>。</li> <li> <code class="language-plaintext highlighter-rouge">force</code>：可选，类型为数值，范围在 <code class="language-plaintext highlighter-rouge">0</code> 到 <code class="language-plaintext highlighter-rouge">1</code> 之间，表示触摸压力。<code class="language-plaintext highlighter-rouge">0</code> 代表没有压力，<code class="language-plaintext highlighter-rouge">1</code> 代表硬件所能识别的最大压力，默认为 <code class="language-plaintext highlighter-rouge">0</code>。</li> </ul> <h4 id="22-touch-接口的实例属性">2.2 Touch 接口的实例属性</h4> <h5 id="1touchidentifier">（1）Touch.identifier</h5> <p><code class="language-plaintext highlighter-rouge">Touch.identifier</code> 属性返回一个整数，表示触摸点的唯一 ID。这个值在整个触摸过程保持不变，直到触摸事件结束。</p> <h5 id="2touchscreenxtouchscreenytouchclientxtouchclientypagexpagey">（2）Touch.screenX，Touch.screenY，Touch.clientX，Touch.clientY，pageX，pageY</h5> <ul> <li> <code class="language-plaintext highlighter-rouge">Touch.screenX</code> 属性和 <code class="language-plaintext highlighter-rouge">Touch.screenY</code> 属性，分别表示触摸点相对于屏幕左上角的横坐标和纵坐标，与页面是否滚动无关。</li> <li> <code class="language-plaintext highlighter-rouge">Touch.clientX</code> 属性和 <code class="language-plaintext highlighter-rouge">Touch.clientY</code> 属性，分别表示触摸点相对于浏览器视口左上角的横坐标和纵坐标，与页面是否滚动无关。</li> <li> <code class="language-plaintext highlighter-rouge">Touch.pageX</code> 属性和 <code class="language-plaintext highlighter-rouge">Touch.pageY</code> 属性，分别表示触摸点相对于当前页面左上角的横坐标和纵坐标，包含了页面滚动带来的位移。</li> </ul> <h5 id="3touchradiusxtouchradiusytouchrotationangle">（3）Touch.radiusX，Touch.radiusY，Touch.rotationAngle</h5> <ul> <li> <code class="language-plaintext highlighter-rouge">Touch.radiusX</code> 属性和 <code class="language-plaintext highlighter-rouge">Touch.radiusY</code> 属性，分别返回触摸点周围受到影响的椭圆范围的 <code class="language-plaintext highlighter-rouge">X</code> 轴半径和 <code class="language-plaintext highlighter-rouge">Y</code> 轴半径，单位为像素。乘以 <code class="language-plaintext highlighter-rouge">2</code> 就可以得到触摸范围的宽度和高度。</li> <li> <code class="language-plaintext highlighter-rouge">Touch.rotationAngle</code> 属性表示触摸区域的椭圆的旋转角度，单位为度数，在 <code class="language-plaintext highlighter-rouge">0</code> 到 <code class="language-plaintext highlighter-rouge">90</code> 度之间。</li> </ul> <p>上面这三个属性共同定义了用户与屏幕接触的区域，对于描述手指这一类非精确的触摸，很有帮助。指尖接触屏幕，触摸范围会形成一个椭圆，这三个属性就用来描述这个椭圆区域。</p> <h5 id="4touchforce">（4）Touch.force</h5> <p><code class="language-plaintext highlighter-rouge">Touch.force</code> 属性返回一个 <code class="language-plaintext highlighter-rouge">0</code> 到 <code class="language-plaintext highlighter-rouge">1</code> 之间的数值，表示触摸压力。<code class="language-plaintext highlighter-rouge">0</code> 代表没有压力，<code class="language-plaintext highlighter-rouge">1</code> 代表硬件所能识别的最大压力。</p> <h5 id="5touchtarget">（5）Touch.target</h5> <p><code class="language-plaintext highlighter-rouge">Touch.target</code> 属性返回一个元素节点，代表触摸发生时所在的那个元素节点。即使触摸点已经离开了这个节点，该属性依然不变。</p> <h3 id="3-touchlist-接口">3. TouchList 接口</h3> <p><code class="language-plaintext highlighter-rouge">TouchList</code> 接口表示一组触摸点的集合。它的实例是一个类似数组的对象，成员是 <code class="language-plaintext highlighter-rouge">Touch</code> 的实例对象，表示所有触摸点。用户用三根手指触摸，产生的 <code class="language-plaintext highlighter-rouge">TouchList</code> 实例就会包含三个成员，每根手指的触摸点对应一个 <code class="language-plaintext highlighter-rouge">Touch</code> 实例对象。</p> <p>它的实例主要通过触摸事件的 <code class="language-plaintext highlighter-rouge">TouchEvent.touches</code>、<code class="language-plaintext highlighter-rouge">TouchEvent.changedTouches</code>、<code class="language-plaintext highlighter-rouge">TouchEvent.targetTouches</code> 这几个属性获取。</p> <p>它的实例属性和实例方法只有两个。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">TouchList.length</code>：数值，表示成员数量（即触摸点的数量）。</li> <li> <code class="language-plaintext highlighter-rouge">TouchList.item()</code>：返回指定位置的成员，它的参数是该成员的位置编号（从零开始）。</li> </ul> <h3 id="4-touchevent-接口">4. TouchEvent 接口</h3> <p><code class="language-plaintext highlighter-rouge">TouchEvent</code> 接口继承了 <code class="language-plaintext highlighter-rouge">Event</code> 接口，表示由触摸引发的事件实例，通常来自触摸屏或轨迹板。除了被继承的属性以外，它还有一些自己的属性。</p> <p>浏览器原生提供 <code class="language-plaintext highlighter-rouge">TouchEvent()</code> 构造函数，用来生成触摸事件的实例。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">TouchEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">TouchEvent()</code> 构造函数的第一个参数是字符串，表示事件类型；第二个参数是事件的配置对象，该参数是可选的，对象的所有属性也是可选的。除了 <code class="language-plaintext highlighter-rouge">Event</code> 接口的配置属性，该接口还有一些自己的配置属性。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">touches</code>：<code class="language-plaintext highlighter-rouge">TouchList</code> 实例，代表所有的当前处于活跃状态的触摸点，默认值是一个空数组 <code class="language-plaintext highlighter-rouge">[]</code>。</li> <li> <code class="language-plaintext highlighter-rouge">targetTouches</code>：<code class="language-plaintext highlighter-rouge">TouchList</code> 实例，代表所有处在触摸的目标元素节点内部、且仍然处于活动状态的触摸点，默认值是一个空数组 <code class="language-plaintext highlighter-rouge">[]</code>。</li> <li> <code class="language-plaintext highlighter-rouge">changedTouches</code>：<code class="language-plaintext highlighter-rouge">TouchList</code> 实例，代表本次触摸事件的相关触摸点，默认值是一个空数组 <code class="language-plaintext highlighter-rouge">[]</code>。</li> <li> <code class="language-plaintext highlighter-rouge">ctrlKey</code>：布尔值，表示 Ctrl 键是否同时按下，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">shiftKey</code>：布尔值，表示 Shift 键是否同时按下，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">altKey</code>：布尔值，表示 Alt 键是否同时按下，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> <li> <code class="language-plaintext highlighter-rouge">metaKey</code>：布尔值，表示 Meta 键（或 Windows 键）是否同时按下，默认值为 <code class="language-plaintext highlighter-rouge">false</code>。</li> </ul> <p><code class="language-plaintext highlighter-rouge">TouchEvent</code> 接口的实例具有 <code class="language-plaintext highlighter-rouge">Event</code> 实例的所有属性和方法，此外还有一些它自己的实例属性，这些属性全部都是只读。</p> <h4 id="1toucheventtouches">（1）TouchEvent.touches</h4> <p><code class="language-plaintext highlighter-rouge">TouchEvent.touches</code> 属性返回一个 <code class="language-plaintext highlighter-rouge">TouchList</code> 实例，成员是所有仍然处于活动状态（即触摸中）的触摸点。一般来说，一个手指就是一个触摸点。</p> <h4 id="2toucheventtargettouches">（2）TouchEvent.targetTouches</h4> <p><code class="language-plaintext highlighter-rouge">TouchEvent.targetTouches</code> 属性返回一个 <code class="language-plaintext highlighter-rouge">TouchList</code> 实例，成员是触摸事件的目标元素节点内部、所有仍然处于活动状态（即触摸中）的触摸点。</p> <h4 id="3toucheventchangedtouches">（3）TouchEvent.changedTouches</h4> <p><code class="language-plaintext highlighter-rouge">TouchEvent.changedTouches</code> 属性返回一个 <code class="language-plaintext highlighter-rouge">TouchList</code> 实例，成员是一组 <code class="language-plaintext highlighter-rouge">Touch</code> 实例对象，表示本次触摸事件的相关触摸点。</p> <p>对于不同的时间，该属性的含义有所不同。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">touchstart</code> 事件：被激活的触摸点</li> <li> <code class="language-plaintext highlighter-rouge">touchmove</code> 事件：发生变化的触摸点</li> <li> <code class="language-plaintext highlighter-rouge">touchend</code> 事件：消失的触摸点（即不再被触碰的点）</li> </ul> <h4 id="4toucheventaltkeytoucheventctrlkeytoucheventshiftkeytoucheventmetakey">（4）TouchEvent.altKey，TouchEvent.ctrlKey，TouchEvent.shiftKey，TouchEvent.metaKey</h4> <ul> <li> <code class="language-plaintext highlighter-rouge">TouchEvent.altKey</code>：布尔值，表示触摸时是否按下了 Alt 键。</li> <li> <code class="language-plaintext highlighter-rouge">TouchEvent.ctrlKey</code>：布尔值，表示触摸时是否按下了 Ctrl 键。</li> <li> <code class="language-plaintext highlighter-rouge">TouchEvent.shiftKey</code>：布尔值：表示触摸时是否按下了 Shift 键。</li> <li> <code class="language-plaintext highlighter-rouge">TouchEvent.metaKey</code>：布尔值，表示触摸时是否按下了 Meta 键（或 Windows 键）。</li> </ul> <h3 id="5-触摸事件的种类">5. 触摸事件的种类</h3> <p>触摸引发的事件，有以下几种。可以通过 <code class="language-plaintext highlighter-rouge">TouchEvent.type</code> 属性，查看到底发生的是哪一种事件。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">touchstart</code>：用户开始触摸时触发，它的 <code class="language-plaintext highlighter-rouge">target</code> 属性返回发生触摸的元素节点。</li> <li> <code class="language-plaintext highlighter-rouge">touchmove</code>：用户移动触摸点时触发，它的 <code class="language-plaintext highlighter-rouge">target</code> 属性与 <code class="language-plaintext highlighter-rouge">touchstart</code> 事件一致。如果触摸的半径、角度、力度发生变化，也会触发该事件。</li> <li> <code class="language-plaintext highlighter-rouge">touchend</code>：用户不再接触触摸屏时（或者移出屏幕边缘时）触发，它的 <code class="language-plaintext highlighter-rouge">target</code> 属性与 <code class="language-plaintext highlighter-rouge">touchstart</code> 事件一致的，就是开始触摸时所在的元素节点。它的 <code class="language-plaintext highlighter-rouge">changedTouches</code> 属性返回一个 <code class="language-plaintext highlighter-rouge">TouchList</code> 实例，包含所有不再触摸的触摸点（即 <code class="language-plaintext highlighter-rouge">Touch</code> 实例对象）。</li> <li> <code class="language-plaintext highlighter-rouge">touchcancel</code>：触摸点取消时触发，比如在触摸区域跳出一个模态窗口（modal window）、触摸点离开了文档区域（进入浏览器菜单栏）、用户的触摸点太多，超过了支持的上限（自动取消早先的触摸点）。</li> </ul> <h2 id="九拖拉事件">九、拖拉事件</h2> <h3 id="1-拖拉事件的种类">1. 拖拉事件的种类</h3> <p>拖拉（drag）指的是，用户在某个对象上按下鼠标键不放，拖动它到另一个位置，然后释放鼠标键，将该对象放在那里。</p> <p>拖拉的对象有好几种，包括元素节点、图片、链接、选中的文字等等。在网页中，除了元素节点默认不可以拖拉，其他（图片、链接、选中的文字）都可以直接拖拉。为了让元素节点可拖拉，可以将该节点的 <code class="language-plaintext highlighter-rouge">draggable</code> 属性设为 <code class="language-plaintext highlighter-rouge">true</code>。</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">draggable=</span><span class="s">"true"</span><span class="nt">&gt;</span>
  此区域可拖拉
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <p>注意，一旦某个元素节点的 <code class="language-plaintext highlighter-rouge">draggable</code> 属性设为 <code class="language-plaintext highlighter-rouge">true</code>，就无法再用鼠标选中该节点内部的文字或子节点了。</p> <p>当元素节点或选中的文本被拖拉时，会持续触发拖拉事件。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">drag</code>：拖拉过程中，在被拖拉的节点上持续触发（相隔几百毫秒）。</li> <li> <code class="language-plaintext highlighter-rouge">dragstart</code>：用户开始拖拉时，在被拖拉的节点上触发，该事件的 <code class="language-plaintext highlighter-rouge">target</code> 属性是被拖拉的节点。通常应该在这个事件的监听函数中，指定拖拉的数据。</li> <li> <code class="language-plaintext highlighter-rouge">dragend</code>：拖拉结束时（释放鼠标键或按下 ESC 键）在被拖拉的节点上触发，该事件的 <code class="language-plaintext highlighter-rouge">target</code> 属性是被拖拉的节点。它与 <code class="language-plaintext highlighter-rouge">dragstart</code> 事件，在同一个节点上触发。不管拖拉是否跨窗口，或者中途被取消，<code class="language-plaintext highlighter-rouge">dragend</code> 事件总是会触发。</li> <li> <code class="language-plaintext highlighter-rouge">dragenter</code>：拖拉进入当前节点时，在当前节点上触发一次，该事件的 <code class="language-plaintext highlighter-rouge">target</code> 属性是当前节点。通常应该在这个事件的监听函数中，指定是否允许在当前节点放下（<code class="language-plaintext highlighter-rouge">drop</code>）拖拉的数据。如果当前节点没有该事件的监听函数，或者监听函数不执行任何操作，就意味着不允许在当前节点放下数据。在视觉上显示拖拉进入当前节点，也是在这个事件的监听函数中设置。</li> <li> <code class="language-plaintext highlighter-rouge">dragover</code>：拖拉到当前节点上方时，在当前节点上持续触发（相隔几百毫秒），该事件的 <code class="language-plaintext highlighter-rouge">target</code> 属性是当前节点。<code class="language-plaintext highlighter-rouge">dragenter</code> 事件在进入该节点时触发，只要没有离开这个节点，<code class="language-plaintext highlighter-rouge">dragover</code> 事件会持续触发。</li> <li> <code class="language-plaintext highlighter-rouge">dragleave</code>：拖拉操作离开当前节点范围时，在当前节点上触发，该事件的 <code class="language-plaintext highlighter-rouge">target</code> 属性是当前节点。如果要在视觉上显示拖拉离开操作当前节点，就在这个事件的监听函数中设置。</li> <li> <code class="language-plaintext highlighter-rouge">drop</code>：被拖拉的节点或选中的文本，释放到目标节点时，在目标节点上触发。如果当前节点不允许 <code class="language-plaintext highlighter-rouge">drop</code>，即使在该节点上方松开鼠标键，也不会触发该事件。如果用户按下 ESC 键，取消这个操作，也不会触发该事件。该事件的监听函数负责取出拖拉数据，并进行相关处理。</li> </ul> <p>关于拖拉事件，有以下几个注意点。</p> <ul> <li>拖拉过程只触发以上这些拖拉事件，尽管鼠标在移动，但是鼠标事件不会触发。</li> <li>将文件从操作系统拖拉进浏览器，不会触发 <code class="language-plaintext highlighter-rouge">dragstart</code> 和 <code class="language-plaintext highlighter-rouge">dragend</code> 事件。</li> <li> <code class="language-plaintext highlighter-rouge">dragenter</code> 和 <code class="language-plaintext highlighter-rouge">dragover</code> 事件的监听函数，用来取出拖拉的数据（即允许放下被拖拉的元素）。由于网页的大部分区域不适合作为放下拖拉元素的目标节点，所以这两个事件的默认设置为当前节点不允许接受被拖拉的元素。如果想要在目标节点上放下的数据，首先必须阻止这两个事件的默认行为。</li> </ul> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">ondragover</span><span class="o">=</span><span class="dl">"</span><span class="s2">return false</span><span class="dl">"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">ondragover</span><span class="o">=</span><span class="dl">"</span><span class="s2">event.preventDefault()</span><span class="dl">"</span><span class="o">&gt;</span>
</code></pre></div></div> <p>上面代码中，如果不取消拖拉事件或者阻止默认行为，就不能在 <code class="language-plaintext highlighter-rouge">div</code> 节点上放下被拖拉的节点。</p> <h3 id="2-dragevent-接口">2. DragEvent 接口</h3> <p>拖拉事件继承了 <code class="language-plaintext highlighter-rouge">DragEvent</code> 接口，这个接口又继承了 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 接口和 <code class="language-plaintext highlighter-rouge">Event</code> 接口。<code class="language-plaintext highlighter-rouge">DragEvent()</code> 构造函数用来生成拖拉事件的实例对象。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">DragEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">DragEvent()</code> 构造函数的第一个参数是字符串，表示事件的类型，该参数必须；第二个参数是事件的配置对象，用来设置事件的属性，该参数可选。配置对象除了接受 <code class="language-plaintext highlighter-rouge">MouseEvent</code> 接口和 <code class="language-plaintext highlighter-rouge">Event</code> 接口的配置属性，还可以设置 <code class="language-plaintext highlighter-rouge">dataTransfer</code> 属性要么是 <code class="language-plaintext highlighter-rouge">null</code>，要么是一个 <code class="language-plaintext highlighter-rouge">DataTransfer</code> 接口的实例。</p> <h3 id="3-datatransfer-接口概述">3. DataTransfer 接口概述</h3> <p>所有拖拉事件的实例都有 <code class="language-plaintext highlighter-rouge">DragEvent.dataTransfer</code> 属性，用来读写需要传递的数据。这个属性的值是一个 <code class="language-plaintext highlighter-rouge">DataTransfer</code> 接口的实例。<code class="language-plaintext highlighter-rouge">DataTransfer()</code> 构造函数用来生成 <code class="language-plaintext highlighter-rouge">DataTransfer</code> 实例对象。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">dataTrans</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataTransfer</span><span class="p">();</span>
</code></pre></div></div> <p>拖拉的数据分成两方面：数据的种类（又称格式）和数据的值。数据的种类是一个 MIME 字符串（比如 <code class="language-plaintext highlighter-rouge">text/plain</code>、<code class="language-plaintext highlighter-rouge">image/jpeg</code>），数据的值是一个字符串。一般来说，如果拖拉一段文本，则数据默认就是那段文本；如果拖拉一个链接，则数据默认就是链接的 URL。</p> <p>拖拉事件开始时，开发者可以提供数据类型和数据值。拖拉过程中，开发者通过 <code class="language-plaintext highlighter-rouge">dragenter</code> 和 <code class="language-plaintext highlighter-rouge">dragover</code> 事件的监听函数，检查数据类型，以确定是否允许放下（<code class="language-plaintext highlighter-rouge">drop</code>）被拖拉的对象。比如，在只允许放下链接的区域，检查拖拉的数据类型是否为 <code class="language-plaintext highlighter-rouge">text/uri-list</code>。</p> <p>发生 <code class="language-plaintext highlighter-rouge">drop</code> 事件时，监听函数取出拖拉的数据，对其进行处理。</p> <h3 id="4-datatransfer-的实例属性">4. DataTransfer 的实例属性</h3> <h4 id="41-datatransferdropeffect">4.1 DataTransfer.dropEffect</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.dropEffect</code> 属性用来设置放下（<code class="language-plaintext highlighter-rouge">drop</code>）被拖拉节点时的效果，会影响到拖拉经过相关区域时鼠标的形状。它可能取下面的值。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">copy</code>：复制被拖拉的节点</li> <li> <code class="language-plaintext highlighter-rouge">move</code>：移动被拖拉的节点</li> <li> <code class="language-plaintext highlighter-rouge">link</code>：创建指向被拖拉的节点的链接</li> <li> <code class="language-plaintext highlighter-rouge">none</code>：无法放下被拖拉的节点</li> </ul> <p><code class="language-plaintext highlighter-rouge">dropEffect</code> 属性一般在 <code class="language-plaintext highlighter-rouge">dragenter</code> 和 <code class="language-plaintext highlighter-rouge">dragover</code> 事件的监听函数中设置，对于 <code class="language-plaintext highlighter-rouge">dragstart</code>、<code class="language-plaintext highlighter-rouge">drag</code>、<code class="language-plaintext highlighter-rouge">dragleave</code> 这三个事件，该属性不起作用。因为该属性只对接受被拖拉的节点的区域有效，对被拖拉的节点本身是无效的。进入目标区域后，拖拉行为会初始化成设定的效果。</p> <h4 id="42-datatransfereffectallowed">4.2 DataTransfer.effectAllowed</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.effectAllowed</code> 属性设置本次拖拉中允许的效果。它可能取下面的值。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">copy</code>：复制被拖拉的节点</li> <li> <code class="language-plaintext highlighter-rouge">move</code>：移动被拖拉的节点</li> <li> <code class="language-plaintext highlighter-rouge">link</code>：创建指向被拖拉节点的链接</li> <li> <code class="language-plaintext highlighter-rouge">none</code>：无法放下被拖拉的节点</li> <li> <code class="language-plaintext highlighter-rouge">copyLink</code>：允许 <code class="language-plaintext highlighter-rouge">copy</code> 或 <code class="language-plaintext highlighter-rouge">link</code> </li> <li> <code class="language-plaintext highlighter-rouge">copyMove</code>：允许 <code class="language-plaintext highlighter-rouge">copy</code> 或 <code class="language-plaintext highlighter-rouge">move</code> </li> <li> <code class="language-plaintext highlighter-rouge">linkMove</code>：允许 <code class="language-plaintext highlighter-rouge">link</code> 或 <code class="language-plaintext highlighter-rouge">move</code> </li> <li> <code class="language-plaintext highlighter-rouge">all</code>：允许所有效果</li> <li> <code class="language-plaintext highlighter-rouge">uninitialized</code>：默认值，等同于 <code class="language-plaintext highlighter-rouge">all</code> </li> </ul> <p>如果某种效果是不允许的，用户就无法在目标节点中达成这种效果。</p> <p>这个属性与 <code class="language-plaintext highlighter-rouge">dropEffect</code> 属性是同一件事的两个方面。前者设置被拖拉的节点允许的效果，后者设置接受拖拉的区域的效果，它们往往配合使用。</p> <p><code class="language-plaintext highlighter-rouge">dragstart</code> 事件的监听函数，可以用来设置这个属性。其他事件的监听函数里面设置这个属性是无效的。</p> <p>只要 <code class="language-plaintext highlighter-rouge">dropEffect</code> 属性和 <code class="language-plaintext highlighter-rouge">effectAllowed</code> 属性之中，有一个为 <code class="language-plaintext highlighter-rouge">none</code>，就无法在目标节点上完成 <code class="language-plaintext highlighter-rouge">drop</code> 操作。</p> <h4 id="43-datatransferfiles">4.3 DataTransfer.files</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.files</code> 属性是一个 <code class="language-plaintext highlighter-rouge">FileList</code> 对象，包含一组本地文件，可以用来在拖拉操作中传送。如果本次拖拉不涉及文件，则该属性为空的 <code class="language-plaintext highlighter-rouge">FileList</code> 对象。</p> <h4 id="44-datatransfertypes">4.4 DataTransfer.types</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.types</code> 属性是一个只读的数组，每个成员是一个字符串，里面是拖拉的数据格式（通常是 MIME 值）。比如，如果拖拉的是文字，对应的成员就是 <code class="language-plaintext highlighter-rouge">text/plain</code>。</p> <h4 id="45-datatransferitems">4.5 DataTransfer.items</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.items</code> 属性返回一个类似数组的只读对象（DataTransferItemList 实例），每个成员就是本次拖拉的一个对象（DataTransferItem 实例）。</p> <p><code class="language-plaintext highlighter-rouge">DataTransferItemList</code> 实例具有以下的属性和方法。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">length</code>：返回成员的数量</li> <li> <code class="language-plaintext highlighter-rouge">add(data, type)</code>：增加一个指定内容和类型（比如 <code class="language-plaintext highlighter-rouge">text/html</code> 和 <code class="language-plaintext highlighter-rouge">text/plain</code>）的字符串作为成员</li> <li> <code class="language-plaintext highlighter-rouge">add(file)</code>：<code class="language-plaintext highlighter-rouge">add</code> 方法的另一种用法，增加一个文件作为成员</li> <li> <code class="language-plaintext highlighter-rouge">remove(index)</code>：移除指定位置的成员</li> <li> <code class="language-plaintext highlighter-rouge">clear()</code>：移除所有的成员</li> </ul> <p>DataTransferItem 实例具有以下的属性和方法。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">kind</code>：返回成员的种类（<code class="language-plaintext highlighter-rouge">string</code> 还是 <code class="language-plaintext highlighter-rouge">file</code>）。</li> <li> <code class="language-plaintext highlighter-rouge">type</code>：返回成员的类型（通常是 MIME 值）。</li> <li> <code class="language-plaintext highlighter-rouge">getAsFile()</code>：如果被拖拉是文件，返回该文件，否则返回 <code class="language-plaintext highlighter-rouge">null</code>。</li> <li> <code class="language-plaintext highlighter-rouge">getAsString(callback)</code>：如果被拖拉的是字符串，将该字符传入指定的回调函数处理。该方法是异步的，所以需要传入回调函数。</li> </ul> <h3 id="5-datatransfer-的实例方法">5. DataTransfer 的实例方法</h3> <h4 id="51-datatransfersetdata">5.1 DataTransfer.setData()</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.setData()</code> 用来设置拖拉事件所带有的数据。该方法没有返回值。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nf">setData</span><span class="p">(</span><span class="nx">format</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</code></pre></div></div> <p>该方法接受两个参数，都是字符串。第一个参数表示数据类型（比如 <code class="language-plaintext highlighter-rouge">text/plain</code>），第二个参数是具体数据。如果指定类型的数据在 <code class="language-plaintext highlighter-rouge">dataTransfer</code> 属性不存在，那么这些数据将被加入，否则原有的数据将被新数据替换。</p> <p>如果是拖拉文本框或者拖拉选中的文本，会默认将对应的文本数据，添加到 <code class="language-plaintext highlighter-rouge">dataTransfer</code> 属性，不用手动指定。</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">draggable=</span><span class="s">"true"</span><span class="nt">&gt;</span>
  aaa
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <p>上面代码中，拖拉这个 <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> 元素会自动带上文本数据 <code class="language-plaintext highlighter-rouge">aaa</code>。</p> <p>使用 <code class="language-plaintext highlighter-rouge">setData()</code> 可以替换到原有数据。</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span>
  <span class="na">draggable=</span><span class="s">"true"</span>
  <span class="na">ondragstart=</span><span class="s">"event.dataTransfer.setData('text/plain', 'bbb')"</span>
<span class="nt">&gt;</span>
  aaa
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <p>上面代码中，拖拉数据实际上是 <code class="language-plaintext highlighter-rouge">bbb</code>，而不是 <code class="language-plaintext highlighter-rouge">aaa</code>。</p> <h4 id="52-datatransfergetdata">5.2 DataTransfer.getData()</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.getData(format)</code> 接受一个字符串（表示数据类型）作为参数，返回事件所带的指定类型的数据（通常是用 <code class="language-plaintext highlighter-rouge">setData</code> 方法添加的数据）。通常只有 <code class="language-plaintext highlighter-rouge">drop</code> 事件触发后，才能取出数据。</p> <p><code class="language-plaintext highlighter-rouge">getData()</code> 返回的是一个字符串，如果其中包含多项数据，必须手动解析。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">onDrop</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nf">getData</span><span class="p">(</span><span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
  <span class="nx">event</span><span class="p">.</span><span class="nf">preventDefault</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <p>上面代码取出拖拉事件的文本数据，将其替换成当前节点的文本内容。注意，这时还必须取消浏览器的默认行为，因为假如用户拖拉的是一个链接，浏览器默认会在当前窗口打开这个链接。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">doDrop</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nf">getData</span><span class="p">(</span><span class="dl">'</span><span class="s1">text/uri-list</span><span class="dl">'</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">line</span> <span class="k">of</span> <span class="nx">lines</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">link</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">link</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">line</span><span class="p">;</span>
    <span class="nx">link</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">line</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nf">appendChild</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">event</span><span class="p">.</span><span class="nf">preventDefault</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <p>上面代码中，<code class="language-plaintext highlighter-rouge">getData()</code> 返回的是一组链接，必须自行解析。</p> <p>类型值指定为 URL，可以取出第一个有效链接。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nf">getData</span><span class="p">(</span><span class="dl">'</span><span class="s1">URL</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div> <p>下面的例子是从多种类型的数据里面取出数据。</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">doDrop</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">types</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">types</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">supportedTypes</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">text/uri-list</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">];</span>
  <span class="nx">types</span> <span class="o">=</span> <span class="nx">supportedTypes</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nf">function </span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="nx">types</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">});</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">types</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nf">getData</span><span class="p">(</span><span class="nx">types</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="nx">event</span><span class="p">.</span><span class="nf">preventDefault</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <h4 id="53-datatransfercleardata">5.3 DataTransfer.clearData()</h4> <p><code class="language-plaintext highlighter-rouge">DataTransfer.clearData(format)</code> 接受一个字符串（表示数据类型）作为参数，删除事件所带的指定类型的数据。如果没有指定类型，则删除所有数据。</p> <ul> <li>该方法不会移除拖拉的文件，因此调用该方法后，<code class="language-plaintext highlighter-rouge">DataTransfer.types</code> 属性可能依然会返回 Files 类型（前提是存在文件拖拉）。</li> <li>该方法只能在 <code class="language-plaintext highlighter-rouge">dragstart</code> 事件的监听函数之中使用，因为这是拖拉操作的数据唯一可写的时机。</li> </ul> <h4 id="54-datatransfersetdragimage">5.4 DataTransfer.setDragImage()</h4> <p>拖动过程中（<code class="language-plaintext highlighter-rouge">dragstart</code> 事件触发后），浏览器会显示一张图片跟随鼠标一起移动，表示被拖动的节点。这张图片是自动创造的，通常显示为被拖动节点的外观，不需要自己动手设置。</p> <p><code class="language-plaintext highlighter-rouge">DataTransfer.setDragImage(imgElement, xOffset, yOffset)</code> 可以自定义这张图片。它接受三个参数。第一个是 <code class="language-plaintext highlighter-rouge">&lt;img&gt;</code> 节点或者 <code class="language-plaintext highlighter-rouge">&lt;canvas&gt;</code> 节点，如果省略或为 <code class="language-plaintext highlighter-rouge">null</code>，则使用被拖动的节点的外观；第二个和第三个参数为鼠标相对于该图片左上角的横坐标和纵坐标。</p> <h2 id="十其他常见事件">十、其他常见事件</h2> <h3 id="1-资源事件">1. 资源事件</h3> <p>beforeunload 事件 unload 事件 load 事件，error 事件</p> <h3 id="2-session-历史事件">2. session 历史事件</h3> <p>pageshow 事件，pagehide 事件 popstate 事件 hashchange 事件</p> <h3 id="3-网页状态事件">3. 网页状态事件</h3> <p>DOMContentLoaded 事件 readystatechange 事件</p> <h3 id="4-窗口事件">4. 窗口事件</h3> <p>scroll 事件 resize 事件 fullscreenchange 事件，fullscreenerror 事件</p> <h3 id="5-剪贴板事件">5. 剪贴板事件</h3> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <h3 id="6-焦点事件">6. 焦点事件</h3> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <h3 id="7-customevent-接口">7. CustomEvent 接口</h3> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <h2 id="十一globaleventhandlers-接口">十一、GlobalEventHandlers 接口</h2> <ul> <li>GlobalEventHandlers.onabort</li> <li>GlobalEventHandlers.onerror</li> <li>GlobalEventHandlers.onload</li> <li>GlobalEventHandlers.onloadstart</li> <li>GlobalEventHandlers.onfocus</li> <li>GlobalEventHandlers.onblur</li> <li>GlobalEventHandlers.onscroll</li> <li>GlobalEventHandlers.oncontextmenu</li> <li>GlobalEventHandlers.onshow</li> </ul> <h3 id="其他的事件属性">其他的事件属性</h3> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code></code></pre></div></div> <h2 id="十二参考">十二、参考</h2> <ul> <li>阮一峰，<a href="https://wangdoc.com/javascript/events/" rel="external nofollow noopener" target="_blank">JavaScript 教程 - 事件</a> </li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/geolocation/">《Web API 教程 - Geolocation API》摘录</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/number/">ES6 - 数值的扩展</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/canvas/">《Web API 教程 - Canvas API》摘录</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/88-merge-sorted-array/">88. 合并两个有序数组</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/bom/">《JavaScript 教程 - 浏览器模型》摘录</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Zhang Feng. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"This is a description of the page. You can modify it in &#39;_pages/cv.md&#39;. You can also change or remove the top pdf download button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"nav-people",title:"people",description:"members of the lab or group",section:"Navigation",handler:()=>{window.location.href="/people/"}},{id:"dropdown-blog",title:"blog",description:"",section:"Dropdown",handler:()=>{window.location.href="/blog/"}},{id:"post-web-api-\u6559\u7a0b-geolocation-api-\u6458\u5f55",title:"\u300aWeb API \u6559\u7a0b - Geolocation API\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/geolocation/"}},{id:"post-es6-\u6570\u503c\u7684\u6269\u5c55",title:"ES6 - \u6570\u503c\u7684\u6269\u5c55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/number/"}},{id:"post-web-api-\u6559\u7a0b-canvas-api-\u6458\u5f55",title:"\u300aWeb API \u6559\u7a0b - Canvas API\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/canvas/"}},{id:"post-88-\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u6570\u7ec4",title:"88. \u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u6570\u7ec4",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/88-merge-sorted-array/"}},{id:"post-javascript-\u6559\u7a0b-\u6d4f\u89c8\u5668\u6a21\u578b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b - \u6d4f\u89c8\u5668\u6a21\u578b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/bom/"}},{id:"post-javascript-\u6559\u7a0b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/events/"}},{id:"post-javascript-\u6559\u7a0b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/dom/"}},{id:"post-javascript-\u6559\u7a0b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/async/"}},{id:"post-javascript-\u6559\u7a0b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/oop/"}},{id:"post-javascript-\u6559\u7a0b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/stdlib/"}},{id:"post-javascript-\u6559\u7a0b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/features/"}},{id:"post-javascript-\u6559\u7a0b-\u6458\u5f55",title:"\u300aJavaScript \u6559\u7a0b\u300b\u6458\u5f55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/operators/"}},{id:"post-webpack-\u7684\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f",title:"webpack \u7684\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/publish-subscribe-model/"}},{id:"post-webpack-\u9879\u76ee\u4f18\u5316",title:"webpack \u9879\u76ee\u4f18\u5316",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/optimization/"}},{id:"post-webpack-\u5e38\u7528\u914d\u7f6e\u9879",title:"webpack \u5e38\u7528\u914d\u7f6e\u9879",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/configuration/"}},{id:"post-webpack-\u5e38\u7528\u914d\u7f6e\u9879",title:"webpack \u5e38\u7528\u914d\u7f6e\u9879",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/concepts/"}},{id:"post-webpack-\u6784\u5efa\u6d41\u7a0b",title:"webpack \u6784\u5efa\u6d41\u7a0b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/build-flow/"}},{id:"post-webpack-\u4e2d\u7684-plugin",title:"webpack \u4e2d\u7684 Plugin",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/plugin/"}},{id:"post-webpack-\u4e2d\u7684-loader",title:"webpack \u4e2d\u7684 Loader",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/loader/"}},{id:"post-http-\u7f13\u5b58",title:"HTTP \u7f13\u5b58",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/07-caching/"}},{id:"post-http-\u8fde\u63a5\u7ba1\u7406",title:"HTTP \u8fde\u63a5\u7ba1\u7406",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/04-connection-management/"}},{id:"post-es6-\u7f16\u7a0b\u98ce\u683c",title:"ES6 - \u7f16\u7a0b\u98ce\u683c",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/style/"}},{id:"post-\u8ba1\u7b97\u673a\u7f51\u7edc-\u5e94\u7528\u5c42",title:"\u8ba1\u7b97\u673a\u7f51\u7edc - \u5e94\u7528\u5c42",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/application-layer/"}},{id:"post-\u54cd\u5e94\u5f0f-web-\u8bbe\u8ba1",title:"\u54cd\u5e94\u5f0f Web \u8bbe\u8ba1",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/responsive-web-design/"}},{id:"post-\u8ba1\u7b97\u673a\u7f51\u7edc-\u8fd0\u8f93\u5c42",title:"\u8ba1\u7b97\u673a\u7f51\u7edc - \u8fd0\u8f93\u5c42",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/transport-layer/"}},{id:"post-react-\u4e2d\u7684\u4e8b\u4ef6",title:"React \u4e2d\u7684\u4e8b\u4ef6",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/events-in-react/"}},{id:"post-css-\u9884\u5904\u7406\u5668",title:"CSS \u9884\u5904\u7406\u5668",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/css-preprocessor/"}},{id:"post-css-modules-\u7528\u6cd5\u6559\u7a0b",title:"CSS Modules \u7528\u6cd5\u6559\u7a0b",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/css-modules/"}},{id:"post-\u8ba1\u7b97\u673a\u7f51\u7edc-\u7f51\u7edc\u5c42",title:"\u8ba1\u7b97\u673a\u7f51\u7edc - \u7f51\u7edc\u5c42",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/network-layer/"}},{id:"post-\u8de8\u57df\u8d44\u6e90\u5171\u4eab-cors",title:"\u8de8\u57df\u8d44\u6e90\u5171\u4eab\uff08CORS\uff09",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/cors/"}},{id:"post-\u9632\u6296\u548c\u8282\u6d41",title:"\u9632\u6296\u548c\u8282\u6d41",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/debounce-and-throttle/"}},{id:"post-es6-symbol",title:"ES6 - Symbol",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/symbol/"}},{id:"post-es6-\u5b57\u7b26\u4e32\u7684\u6269\u5c55",title:"ES6 - \u5b57\u7b26\u4e32\u7684\u6269\u5c55",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/string/"}},{id:"post-es6-set-\u548c-map-\u6570\u636e\u7ed3\u6784",title:"ES6 - Set \u548c Map \u6570\u636e\u7ed3\u6784",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/set-map/"}},{id:"post-es6-reflect",title:"ES6 - Reflect",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/reflect/"}},{id:"post-es6-proxy",title:"ES6 - Proxy",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/proxy/"}},{id:"post-es6-promise-\u5bf9\u8c61",title:"ES6 - Promise \u5bf9\u8c61",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/promise/"}},{id:"post-es6-object",title:"ES6 - Object",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/object/"}},{id:"post-es6-\u6a21\u5757",title:"ES6 - \u6a21\u5757",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/module/"}},{id:"post-es6-let-\u548c-const-\u547d\u4ee4",title:"ES6 - let \u548c const \u547d\u4ee4",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/let-const/"}},{id:"post-es6-iterator",title:"ES6 - Iterator",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/iterator/"}},{id:"post-es6-generator-\u51fd\u6570",title:"ES6 - Generator \u51fd\u6570",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/generator/"}},{id:"post-es6-function",title:"ES6 - Function",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/function/"}},{id:"post-es6-\u88c5\u9970\u5668",title:"ES6 - \u88c5\u9970\u5668",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/decorator/"}},{id:"post-es6-class",title:"ES6 - Class",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/class/"}},{id:"post-es6-async-\u51fd\u6570",title:"ES6 - async \u51fd\u6570",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/async/"}},{id:"post-es6-array",title:"ES6 - Array",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/array/"}},{id:"post-\u8ba1\u7b97\u673a\u7f51\u7edc-\u6570\u636e\u94fe\u8def\u5c42",title:"\u8ba1\u7b97\u673a\u7f51\u7edc - \u6570\u636e\u94fe\u8def\u5c42",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/data-link-layer/"}},{id:"post-\u8ba1\u7b97\u673a\u7f51\u7edc-\u7269\u7406\u5c42",title:"\u8ba1\u7b97\u673a\u7f51\u7edc - \u7269\u7406\u5c42",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/physical-layer/"}},{id:"post-\u8ba1\u7b97\u673a\u7f51\u7edc-\u6982\u8ff0",title:"\u8ba1\u7b97\u673a\u7f51\u7edc - \u6982\u8ff0",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2024/instruction/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%7A%66%65%6E%67%30%37%31%32@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=qc6CJjYAAAAJ","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>